<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Chat js</title>
    <style type="text/css">
      form{
        position: fixed;
        bottom: 5px;
        width: 100%;
      }
      body{
        background-color: #E1DDDD;
      }
    </style>
  </head>
  <body>
    <div id="contenido">
      <ul id="messages"></ul>
      <form action="">
        <input id="m" autocomplete="off">
        <button>Enviar</button>
      </form>
    </div>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.js"></script>
    <script type="text/javascript">
      do{
        if (nombre == "") {
          var nombre = prompt("Necesitas poner tu nombre.")
        } else
          var nombre = prompt("Nombre: ");
      }while(nombre == "");
      var socket = io();
      $('form').submit(function () {
        socket.emit('chat message', $('#m').val());
        $('#m').val('');
        return false;
      });
      socket.on('chat message', function(msg){
        $('#messages').append($('<li>').text(nombre + ': ' + msg));
      });
    </script>
  </body>
</html>
